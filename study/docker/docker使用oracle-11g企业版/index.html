<!DOCTYPE html>
<html lang="zh-cn">
    <head>
		
		
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Docker安装Oracle 11g EE &middot; maxiaofa - blog</title>

		
		<link rel="stylesheet" href="https://blog.maxiaofa.com/css/style.css">
		<link rel="stylesheet" href="https://blog.maxiaofa.com/css/fonts.css">
		
		<link rel="icon" href="https://blog.maxiaofa.com/favicon.ico"/>
		<link rel="icon" type="image/png" sizes="32x32" href="https://blog.maxiaofa.com/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://blog.maxiaofa.com/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="https://blog.maxiaofa.com/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="maxiaofa - blog" />

		<script src="https://blog.maxiaofa.com/js/darkmode.js"></script>
	</head>

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="https://blog.maxiaofa.com/">
					
						<h2 class="nav-title">maxiaofa - blog</h2>
					
				</a>
				<ul>
    
    
        <li>
            <a href="https://blog.maxiaofa.com/study/">
                
                <span>学习</span>
                
            </a>
        </li>
    
</ul>
			</div>
		</nav>

        

<main>
	


        <div class="post">
		<div class="post-info">
        
</div>

		<h1 class="post-title">Docker安装Oracle 11g EE</h1>
<div class="post-line"></div>

		

		<h1 id="docker使用oracle11g企业版">Docker使用Oracle11g企业版</h1>
<p>拉取 <a href="https://registry.hub.docker.com/r/loliconneko/oracle-ee-11g">oracle-ee-11g</a> 镜像</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker pull loliconneko/oracle-ee-11g
</span></span></code></pre></div><p>运行容器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -d --name oracle_ee_11g -p 1521:1521 loliconneko/oracle-ee-11g 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hostname: localhost
</span></span><span style="display:flex;"><span>port: <span style="color:#ae81ff">1521</span>
</span></span><span style="display:flex;"><span>sid: EE
</span></span><span style="display:flex;"><span>service name: EE.oracle.docker
</span></span><span style="display:flex;"><span>username: system
</span></span><span style="display:flex;"><span>password: oracle
</span></span></code></pre></div><p>进入容器同步时间</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#进入容器</span>
</span></span><span style="display:flex;"><span>docker exec -it oracle11g bash
</span></span><span style="display:flex;"><span><span style="color:#75715e">#同步时间</span>
</span></span><span style="display:flex;"><span>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</span></span></code></pre></div><p>修改字符集为GBK</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sqlplus sys/oracle as sysdba
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>SQL&gt; shutdown immediate;
</span></span><span style="display:flex;"><span>SQL&gt; startup mount;
</span></span><span style="display:flex;"><span>SQL&gt; alter system enable restricted session;
</span></span><span style="display:flex;"><span>SQL&gt; alter system set job_queue_processes<span style="color:#f92672">=</span>0;
</span></span><span style="display:flex;"><span>SQL&gt; alter system set aq_tm_processes<span style="color:#f92672">=</span>0;
</span></span><span style="display:flex;"><span>SQL&gt; alter database open;
</span></span><span style="display:flex;"><span>SQL&gt; ALTER DATABASE character set INTERNAL_USE ZHS16GBK;
</span></span><span style="display:flex;"><span>SQL&gt; shutdown immediate;
</span></span><span style="display:flex;"><span>SQL&gt; startup; 
</span></span></code></pre></div><p>修改服务名为orcl</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#修改 global_name</span>
</span></span><span style="display:flex;"><span>SQL&gt; alter database rename global_name to orcl;
</span></span><span style="display:flex;"><span>SQL&gt; update global_name set global_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;orcl&#39;</span>;
</span></span><span style="display:flex;"><span>SQL&gt; commit;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#修改 db_domain</span>
</span></span><span style="display:flex;"><span>SQL&gt; alter system set db_domain<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span> scope<span style="color:#f92672">=</span>spfile;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#修改 service_name</span>
</span></span><span style="display:flex;"><span>SQL&gt; alter system set service_names<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;oracle&#39;</span>; 
</span></span><span style="display:flex;"><span><span style="color:#75715e">#重启</span>
</span></span><span style="display:flex;"><span>SQL&gt; shutdown immediate
</span></span><span style="display:flex;"><span>SQL&gt; startup; 
</span></span></code></pre></div><p>导出容器为镜像</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker commit  oracle_ee_11g  oracle_ee_11g_gbk
</span></span></code></pre></div><p>完成！</p>


		
	</div>

	<div class="pagination">
		<a href="https://blog.maxiaofa.com/study/dos/dos%E5%91%BD%E4%BB%A4/" class="left arrow">&#8592;</a>
		<a href="https://blog.maxiaofa.com/study/docker/docker%E5%91%BD%E4%BB%A4/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			
			<span>
			&copy; <time datetime="2022-11-16 03:23:07.884278052 &#43;0000 UTC m=&#43;0.057605368">2022</time> . Made with <a href='https://gohugo.io'>Hugo</a> using the <a href='https://github.com/EmielH/tale-hugo/'>Tale</a> theme.
			</span>
		</footer>

    </body>
</html>
